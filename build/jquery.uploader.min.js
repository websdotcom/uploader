(function(a){a.uploader=function(d,c){var b=this==window?{}:this;b.$el=a(d);b.el=d;b.$el.data("uploader",b);b.init=function(){b.options=a.extend(true,{},a.uploader.defaultOptions,c);b.inputs=[];b.render()};b.render=function(){b.$el.hide();b.addFile();b.hiddenField=a("<input type='hidden'>").addClass(b.options.hiddenFieldName).insertBefore(b.$el)};b.canAddFile=function(){return b.options.nextIndex<=b.options.maxNumber};b.addFile=function(){if(!b.canAddFile()){return false}console.log("adding input");var e=b.options.nextIndex;b.inputs.push(a("<input type='file'>").addClass(b.options.inputClass).insertBefore(b.$el));b.options.nextIndex++;return b.lastInput()};b.init();return b};a.uploader.defaultOptions={html:{addLabelClass:"uploader-add-label",inputClass:"uploader-input",hiddenFieldName:"uploader-file-ids"},maxNumber:1,addLabel:"Add another",nextIndex:1};a.fn.uploader=function(b){return this.each(function(){return new a.uploader(this,b)})}})(jQuery);
